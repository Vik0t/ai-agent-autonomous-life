# üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî Cyber BDI Simulator

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–µ **BDI (Belief-Desire-Intention)** ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –≤ –∫–∞–∂–¥–æ–º –∏–≥—Ä–æ–≤–æ–º —Ç–∏–∫–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π:

```
–ü–µ—Ä—Ü–µ–ø—Ü–∏–∏ ‚Üí –£–±–µ–∂–¥–µ–Ω–∏—è (Beliefs) ‚Üí –ñ–µ–ª–∞–Ω–∏—è (Desires) ‚Üí –ù–∞–º–µ—Ä–µ–Ω–∏—è (Intentions) ‚Üí –ü–ª–∞–Ω (Plan) ‚Üí –î–µ–π—Å—Ç–≤–∏—è (Actions)
```

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å ‚Äî **FastAPI**-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏–≥—Ä–æ–≤—ã–º —Ü–∏–∫–ª–æ–º (`asyncio`). –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏—Ä–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ **WebSocket** –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É. –§—Ä–æ–Ω—Ç–µ–Ω–¥ ‚Äî —á–∏—Å—Ç—ã–π JavaScript –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

### –°–ª–æ–∏ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Frontend (Vanilla JS)             ‚îÇ
‚îÇ  websocket-client.js ‚Üí UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ WebSocket / REST
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            FastAPI (main.py)                ‚îÇ
‚îÇ   REST API  ‚Ä¢  WebSocket  ‚Ä¢  Static Files   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          WorldSimulator (simulator.py)      ‚îÇ
‚îÇ   –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª: —Ç–∏–∫–∏, –¥–µ–π—Å—Ç–≤–∏—è, —Å–æ–±—ã—Ç–∏—è     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ               ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Agent      ‚îÇ ‚îÇCommunication‚îÇ ‚îÇLLMInterface‚îÇ
‚îÇ  (agent.py) ‚îÇ ‚îÇHub          ‚îÇ ‚îÇ (llm.py)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          BDI Core                          ‚îÇ
‚îÇ  beliefs.py ‚îÇ desires.py ‚îÇ intentions.py   ‚îÇ
‚îÇ  plans.py   ‚îÇ deliberation.py              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ú–æ–¥—É–ª–∏ –∏ –∫–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã

### `agent.py` ‚Äî –ö–ª–∞—Å—Å `Agent`

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä–∞. –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å, —ç–º–æ—Ü–∏–∏ –∏ BDI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≥–µ–Ω—Ç–∞.

**–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:**
```python
Agent(
    agent_id: str,       # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID ("agent-0")
    name: str,           # –ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    avatar: str,         # Emoji-–∞–≤–∞—Ç–∞—Ä
    personality_data: Dict,   # OCEAN-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (0.0‚Äì1.0)
    llm_interface=None   # –°—Å—ã–ª–∫–∞ –Ω–∞ LLMInterface
)
```

**–ö–ª—é—á–µ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã:**

| –ê—Ç—Ä–∏–±—É—Ç | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `personality` | `Personality` | OCEAN-–º–æ–¥–µ–ª—å –ª–∏—á–Ω–æ—Å—Ç–∏ |
| `emotions` | `Emotion` | 8 —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (0.0‚Äì1.0) |
| `beliefs` | `BeliefBase` | –ë–∞–∑–∞ —É–±–µ–∂–¥–µ–Ω–∏–π –∞–≥–µ–Ω—Ç–∞ |
| `desires` | `List[Desire]` | –ê–∫—Ç–∏–≤–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è |
| `intentions` | `List[Intention]` | –¢–µ–∫—É—â–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è |
| `social_battery` | `float` | –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –±–∞—Ç–∞—Ä–µ–π–∫–∞ (0.0‚Äì1.0) |

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

```python
agent.think(perceptions, active_conversation_partners) -> List[Dict]
```
–ó–∞–ø—É—Å–∫–∞–µ—Ç BDI-—Ü–∏–∫–ª —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º.

```python
agent.process_emotional_impact(trigger_type, content, intensity)
```
–û–±–Ω–æ–≤–ª—è–µ—Ç —ç–º–æ—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ `EMOTION_IMPACT_MATRIX`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Ç—á–∏–Ω–≥ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –≤ `content`.

```python
agent.notify_conversation_ended(partner_id)
```
–ó–∞–ø—É—Å–∫–∞–µ—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π cooldown –≤ `DesireGenerator`. –ü–µ—Ä–µ–¥–∞—ë—Ç personality –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ intro/extrovert-–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.

```python
agent.to_dict() -> Dict
```
–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ –¥–ª—è API/WebSocket. –í–∫–ª—é—á–∞–µ—Ç `deep_work_active`, `social_battery`, `current_cooldown_seconds`.

---

### `beliefs.py` ‚Äî –°–∏—Å—Ç–µ–º–∞ —É–±–µ–∂–¥–µ–Ω–∏–π

**`Belief`** ‚Äî –æ–¥–Ω–æ —É–±–µ–∂–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞:

```python
Belief(
    type=BeliefType.WORLD,     # SELF | AGENT | WORLD | EVENT | SOCIAL
    subject="weather",         # –û —á—ë–º —É–±–µ–∂–¥–µ–Ω–∏–µ
    key="condition",           # –ê—Ç—Ä–∏–±—É—Ç
    value="rainy",             # –ó–Ω–∞—á–µ–Ω–∏–µ
    confidence=0.9,            # –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0.0‚Äì1.0)
    source="observation"       # –ò—Å—Ç–æ—á–Ω–∏–∫: observation | communication | inference
)
```

**`BeliefBase`** ‚Äî –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `add_belief(belief)` | –î–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —É–±–µ–∂–¥–µ–Ω–∏–µ. –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç `confidence` |
| `get_belief(type, subject, key)` | –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ |
| `get_beliefs_by_type(type)` | –í—Å–µ —É–±–µ–∂–¥–µ–Ω–∏—è —Ç–∏–ø–∞ |
| `get_beliefs_about(subject)` | –í—Å—ë –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å—É–±—ä–µ–∫—Ç–µ |
| `update_from_perception(perception)` | –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ —Å–ª–æ–≤–∞—Ä—è-–≤–æ—Å–ø—Ä–∏—è—Ç–∏—è |
| `query(query_str, min_confidence)` | –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ |
| `clear_old_beliefs(max_age_hours)` | –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —É–±–µ–∂–¥–µ–Ω–∏—è —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é |

---

### `desires.py` ‚Äî –ñ–µ–ª–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤

**`Desire`** ‚Äî –æ–¥–Ω–æ –∂–µ–ª–∞–Ω–∏–µ:

```python
Desire(
    description="–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å –ù–µ–∫—Å—É—Å–æ–º",
    priority=0.7,            # 0.0‚Äì1.0
    urgency=0.6,
    motivation_type=MotivationType.SOCIAL,  # SOCIAL | SAFETY | CURIOSITY | ACHIEVEMENT | ESTEEM
    source="llm_dynamic",    # –ò—Å—Ç–æ—á–Ω–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    context={"target_agent": "agent-1"}
)
```

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Ç–∏—Ä—ã):

| –¢–∏—Ä | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ò—Å—Ç–æ—á–Ω–∏–∫–∏ |
|---|---|---|
| 5 | ‚â• 0.99 | `world_event`, `user_message` |
| 4 | ‚â• 0.85 | `incoming_message`, `wrap_up` |
| 3 | ‚â• 0.55 | `llm_dynamic` (—Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ) |
| 2 | ‚â• 0.30 | `llm_dynamic` (–Ω–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ), `llm_fallback` |
| 1 | < 0.30 | `idle_drive` |

**`DesireGenerator`** ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∂–µ–ª–∞–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–∏–∫–µ —á–µ—Ä–µ–∑ LLM + –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª. –†–µ–∞–ª–∏–∑—É–µ—Ç:
- **Exponential Cooldown** ‚Äî –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ cooldown —Ä–∞—Å—Ç—ë—Ç
- **Deep Work** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –∂–µ–ª–∞–Ω–∏–π –ø–æ—Å–ª–µ MIN_SOLO_ACTIONS –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **Social Battery Guard** ‚Äî –ø—Ä–∏ `social_battery < 0.2` –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∂–µ–ª–∞–Ω–∏—è

---

### `intentions.py` ‚Äî –ù–∞–º–µ—Ä–µ–Ω–∏—è

**`Intention`** ‚Äî –ø—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∫ –¥–µ–π—Å—Ç–≤–∏—é. –°–≤—è–∑—ã–≤–∞–µ—Ç –∂–µ–ª–∞–Ω–∏–µ (`desire_id`) —Å –ø–ª–∞–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: `ACTIVE ‚Üí SUSPENDED ‚Üî ACTIVE ‚Üí COMPLETED / FAILED / ABANDONED`

**`IntentionSelector`** ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ.

---

### `plans.py` ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**`PlanStep`** ‚Äî –æ–¥–∏–Ω —à–∞–≥ –ø–ª–∞–Ω–∞:

```python
PlanStep(
    action_type=ActionType.SEND_MESSAGE,  # SEND_MESSAGE | WAIT_FOR_RESPONSE | END_CONVERSATION |
                                          # INITIATE_CONVERSATION | THINK | RESPOND_TO_MESSAGE
    parameters={"target": "agent-1", "content": "–ü—Ä–∏–≤–µ—Ç!"},
    description="–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
    estimated_duration=1.0
)
```

**`Planner`** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞–Ω –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —à–∞–≥–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤ –¥–∏–∞–ª–æ–≥–∞ (`generate_next_plan_step`).

---

### `deliberation.py` ‚Äî –¶–∏–∫–ª —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π `DeliberationCycle`

–ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä BDI. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ `agent.think()` –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–∏–∫–µ.

**–ê–ª–≥–æ—Ä–∏—Ç–º `run_cycle()`:**

1. **–û—á–∏—Å—Ç–∫–∞** ‚Äî —É–¥–∞–ª—è–µ—Ç –∏—Å—Ç—ë–∫—à–∏–µ –∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è desires/intentions
2. **Idle Guard** ‚Äî –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤—É–µ—Ç ‚â• 2 —Ç–∏–∫–æ–≤, —É–±–∏–≤–∞–µ—Ç "–∑–æ–º–±–∏"-–Ω–∞–º–µ—Ä–µ–Ω–∏—è
3. **Perception ‚Üí Belief** ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç —É–±–µ–∂–¥–µ–Ω–∏—è –∏–∑ –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—ã—Ö —Å–æ–±—ã—Ç–∏–π
4. **Hard Limit** ‚Äî –µ—Å–ª–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º –ø—Ä–µ–≤—ã—Å–∏–ª `HARD_LIMIT_TURNS (10)` —Ä–µ–ø–ª–∏–∫ ‚Üí `FORCE_QUIT`
5. **Desire Generation** ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –∂–µ–ª–∞–Ω–∏—è —á–µ—Ä–µ–∑ `DesireGenerator`
6. **Idle Drive** ‚Äî —Å—Ç—Ä–∞—Ö–æ–≤–æ—á–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ, –µ—Å–ª–∏ –∞–≥–µ–Ω—Ç —Å–æ–≤—Å–µ–º –±–µ–∑ —Ü–µ–ª–µ–π
7. **–†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ** ‚Äî world_event –∏ user_message –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è
8. **Intention Selection** ‚Äî –≤—ã–±–∏—Ä–∞–µ—Ç –∂–µ–ª–∞–Ω–∏–µ ‚Üí —Å–æ–∑–¥–∞—ë—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
9. **Planning** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞–Ω –¥–ª—è –Ω–∞–º–µ—Ä–µ–Ω–∏—è
10. **Action Extraction** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

**WRAP_UP** ‚Äî –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 80% –ª–∏–º–∏—Ç–∞ —Ä–µ–ø–ª–∏–∫ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ `[farewell, end_conversation]`.

**FORCE_QUIT** ‚Äî –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–ª–∞–≥ `_force_quit_partners`, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä –∞—Ç–æ–º–∞—Ä–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥, —É–¥–∞–ª—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è —É –æ–±–æ–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤, –∑–∞–ø—É—Å–∫–∞–µ—Ç cooldown.

---

### `communication.py` ‚Äî –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

**`Message`** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `sender_id` | `str` | ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è |
| `receiver_id` | `str` | ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è |
| `content` | `str` | –¢–µ–∫—Å—Ç |
| `message_type` | `MessageType` | greeting / question / answer / statement / farewell / ack |
| `conversation_id` | `Optional[str]` | –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–∏–∞–ª–æ–≥—É |
| `requires_response` | `bool` | –û–∂–∏–¥–∞—Ç—å –ª–∏ –æ—Ç–≤–µ—Ç |
| `topic` | `Optional[str]` | –¢–µ–º–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ |

**`Conversation`** ‚Äî –¥–∏–∞–ª–æ–≥ –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏. –°—Ç–∞—Ç—É—Å—ã: `ACTIVE ‚Üí WAITING ‚Üî ACTIVE ‚Üí ENDED / TIMED_OUT`.

**`CommunicationHub`** ‚Äî —à–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `register_agent(agent_id)` | –°–æ–∑–¥–∞—ë—Ç –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–∞ |
| `start_conversation(a, b, topic)` | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ (–∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) |
| `get_active_conversation(a, b)` | –ù–∞–π—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ –º–µ–∂–¥—É –¥–≤—É–º—è –∞–≥–µ–Ω—Ç–∞–º–∏ |
| `end_conversation(conv_id)` | –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥ |
| `send_message(message)` | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–ª—É—á–∞—Ç–µ–ª—è |
| `receive_messages(agent_id)` | –ó–∞–±—Ä–∞—Ç—å –≤—Å–µ –æ–∂–∏–¥–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `broadcast_message(sender, content)` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –∞–≥–µ–Ω—Ç–∞–º |
| `get_all_active_conversations()` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ |
| `cleanup_old_conversations(hours)` | –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ |

---

### `llm.py` ‚Äî –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏

**`LLMInterface`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
1. –ï—Å–ª–∏ –∑–∞–¥–∞–Ω `GROQ_API_KEY` ‚Üí Groq (`llama-3.1-8b-instant`)
2. –ò–Ω–∞—á–µ –µ—Å–ª–∏ –∑–∞–¥–∞–Ω `OPENROUTER_API_KEY` / `OPENAI_API_KEY` ‚Üí OpenRouter
3. –ò–Ω–∞—á–µ ‚Üí MOCK-—Ä–µ–∂–∏–º

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

```python
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π –∞–≥–µ–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
llm.generate_dynamic_desires(agent_name, agent_id, personality, emotions, social_battery, perceptions) -> List[Dict]

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫—É –≤ –¥–∏–∞–ª–æ–≥–µ
llm.generate_dialogue(agent_name, personality, context, incoming_message, conversation_history, message_type) -> str

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–ª–∞–Ω–∞
llm.generate_next_plan_step(agent_name, agent_id, personality, current_desire_description, conversation_history, social_battery) -> List[str]

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫—É —Å —É—á—ë—Ç–æ–º —ç–º–æ—Ü–∏–π
llm.generate_emotional_dialogue(agent_name, personality, emotions, context, message_type) -> str
```

–í—Å–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `_call_llm()` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º retry –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `thinking` (–¥–ª—è –º–æ–¥–µ–ª–µ–π OpenRouter).

---

### `simulator.py` ‚Äî `WorldSimulator`

–ì–ª–∞–≤–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫.

**–ò–≥—Ä–æ–≤–æ–π —Ç–∏–∫ `_process_game_tick()`:**

1. –ß–∏—Ç–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞: —Å—Ç—Ä–æ–∏—Ç –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç `agent.think()` ‚Üí –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã
3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `FORCE_QUIT`-—Ñ–ª–∞–≥–∏ –∞—Ç–æ–º–∞—Ä–Ω–æ

**–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π:**

| –î–µ–π—Å—Ç–≤–∏–µ | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `initiate_conversation` | `_do_initiate` | –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ LLM |
| `send_message` | `_do_send` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–ø–ª–∏–∫—É –≤ –¥–∏–∞–ª–æ–≥ |
| `respond_to_message` | `_do_respond` | –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| `wait_for_response` | `_do_wait` | –ñ–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞ N —Ç–∏–∫–æ–≤, –ø–æ—Ç–æ–º timeout |
| `end_conversation` | `_do_end` | –ó–∞–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥, –∑–∞–ø—É—Å—Ç–∏—Ç—å cooldown —É –æ–±–æ–∏—Ö |
| `think` | `_do_think` | –ü–∞—É–∑–∞ (solo-action, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–∞—Ç–∞—Ä–µ–π–∫—É) |

**`_do_atomic_force_quit(agent, partner_id)`** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞: –∑–∞–∫—Ä—ã–≤–∞–µ—Ç `Conversation`, —É–¥–∞–ª—è–µ—Ç intentions —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç wait-—Å—á—ë—Ç—á–∏–∫–∏, –∑–∞–ø—É—Å–∫–∞–µ—Ç cooldown.

---

## REST API

–ë–∞–∑–æ–≤—ã–π URL: `http://localhost:8000`

### –ê–≥–µ–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `GET` | `/api/agents` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ |
| `GET` | `/api/agents/{id}` | –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: beliefs, intentions, desires, relationships |
| `POST` | `/api/agents` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ |
| `POST` | `/api/agents/{id}/inject` | –ò–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É –Ω–∞–ø—Ä—è–º—É—é (–æ—Ç–ª–∞–¥–∫–∞) |

### –°–æ–æ–±—â–µ–Ω–∏—è –∏ –¥–∏–∞–ª–æ–≥–∏

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `GET` | `/api/messages?limit=50` | –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π |
| `GET` | `/api/messages?conversation_id=X` | –°–æ–æ–±—â–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ |
| `POST` | `/api/messages` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É |
| `GET` | `/api/conversations` | –í—Å–µ –¥–∏–∞–ª–æ–≥–∏ (–∞–∫—Ç–∏–≤–Ω—ã–µ + –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ) |

### –°–æ–±—ã—Ç–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `GET` | `/api/events?limit=50` | –õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π |
| `POST` | `/api/events` | –î–æ–±–∞–≤–∏—Ç—å –º–∏—Ä–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ |
| `GET` | `/api/relationships` | –ì—Ä–∞—Ñ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (nodes + edges) |
| `GET` | `/api/state` | –ü–æ–ª–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏—Ä–∞ (–¥–ª—è –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏) |
| `POST` | `/api/control/speed` | –ò–∑–º–µ–Ω–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏ (`{"speed": 2.0}`) |

---

## WebSocket API

**URL:** `ws://localhost:8000/ws`

### –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (–ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏):
```json
{
  "type": "init",
  "agents": [...],
  "time_speed": 1.0,
  "relationships": [...]
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (–∫–∞–∂–¥—ã–µ ~1 —Å–µ–∫):
```json
{
  "type": "state_update",
  "agents": [...],
  "recent_messages": [...],
  "recent_events": [...],
  "relationships": [...],
  "conversations": [...],
  "time_speed": 1.0
}
```

### –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

**–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—É:**
```json
{
  "type": "send_message",
  "receiver_id": "agent-0",
  "content": "–ü—Ä–∏–≤–µ—Ç!",
  "topic": "user_input"
}
```

**–î–æ–±–∞–≤–∏—Ç—å –º–∏—Ä–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ:**
```json
{
  "type": "add_event",
  "event_description": "–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞ –≤ –≥–æ—Ä–æ–¥–µ"
}
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---|---|---|
| `GROQ_API_KEY` | API-–∫–ª—é—á Groq (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) | `gsk_abc123...` |
| `OPENROUTER_API_KEY` | API-–∫–ª—é—á OpenRouter (–∑–∞–ø–∞—Å–Ω–æ–π) | `sk-or-abc...` |
| `OPENAI_API_KEY` | –°–∏–Ω–æ–Ω–∏–º –¥–ª—è OpenRouter | `sk-...` |

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º—É–ª—è—Ü–∏–∏ (–≤ –∫–æ–¥–µ)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –§–∞–π–ª | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|---|
| `MAX_WAIT_TICKS` | `simulator.py` | `4` | –¢–∏–∫–æ–≤ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –¥–æ timeout |
| `HARD_LIMIT_TURNS` | `deliberation.py` | `10` | –ú–∞–∫—Å–∏–º—É–º —Ä–µ–ø–ª–∏–∫ –≤ –æ–¥–Ω–æ–º –¥–∏–∞–ª–æ–≥–µ |
| `IDLE_GUARD_THRESHOLD` | `deliberation.py` | `2` | –¢–∏–∫–æ–≤ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è –¥–æ Idle Guard |
| `time_speed` | `simulator.py` | `1.0` | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ç–∏–∫–æ–≤ (POST `/api/control/speed`) |

### –ú–æ–¥–µ–ª–∏ LLM

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –°–º–µ–Ω–∞ |
|---|---|---|
| Groq | `llama-3.1-8b-instant` | `llm._model = "–¥—Ä—É–≥–∞—è-–º–æ–¥–µ–ª—å"` |
| OpenRouter | `qwen/qwen3-next-80b-a3b-instruct:free` | –¢–æ –∂–µ |

---

## –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞

–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —ç–º–æ—Ü–∏–∏:

| –¢—Ä–∏–≥–≥–µ—Ä | –≠—Ñ—Ñ–µ–∫—Ç |
|---|---|
| `fire` / `explosion` | ‚Üë fear, ‚Üë surprise, ‚Üë anger |
| `rain` / `cold` | ‚Üë sadness, ‚Üì comfort |
| `gift` / `praise` | ‚Üë happiness, ‚Üì loneliness |
| `conflict` / `insult` | ‚Üë anger, ‚Üë sadness |
| `friendly_chat` | ‚Üë happiness, ‚Üì loneliness |
| `rejection` | ‚Üë sadness, ‚Üë loneliness |

–ù–µ–π—Ä–æ—Ç–∏–∑–º (`neuroticism > 0.6`) —É—Å–∏–ª–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–µ–ª—å—Ç—ã –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: `1.0 + (neuroticism - 0.5) √ó 0.4`.
